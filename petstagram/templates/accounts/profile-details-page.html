{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="profile">
  <div class="profile-data">
    <div class="profile_img">
      <div class="image">
        <!-- Хэрэв зурагтай бол харуул, үгүй бол default -->
        <img src="{% static 'images/person.png' %}" alt="profile image">
      </div>
    </div>

    <div class="personal">
      <div class="edit">
        <!-- Username -->
        <p>{{ profile_user.username }}</p>

        {% if is_owner %}
        <!-- Edit & Delete зөвхөн эзэнд харагдана -->
        <a href="{% url 'profile_edit' profile_user.pk %}">
          <img class="edit-img" src="{% static 'images/edit-pen-icon-6.jpg' %}" alt="edit">
        </a>
        <a href="{% url 'profile_delete' profile_user.pk %}">
          <img class="bin-img" src="{% static 'images/icon-remove-22.jpg' %}" alt="delete">
        </a>
        {% endif %}
      </div>

      <div class="data">
        <span>{{ photos.count }}</span>
        <p>photos</p>

        <span>{{ pets.count }}</span>
        <p>pets</p>

        {% comment %} <span>{{ photos|map:'likes'|sum }}</span> {% endcomment %}
        <p>likes</p>
      </div>

      <!-- Нэр, имэйл, хүйс -->
      {% if profile_user.first_name or profile_user.last_name %}
        <h3 class="names">{{ profile_user.first_name }} {{ profile_user.last_name }}</h3>
      {% endif %}

      <p class="email">{{ profile_user.email }}</p>
      {% if profile_user.gender %}
        <p class="gender">{{ profile_user.gender }}</p>
      {% endif %}
    </div>
  </div>

  <!-- Pets -->
  <div class="pets">
    <div class="statuses">
      {% for pet in pets %}
        <a href="{% url 'pet_details' username=pet.owner.username pet_slug=pet.slug %}">
          <div class="head-pet">
            <div class="status">
              <div class="image">
                <img src="{{ pet.image.url }}" alt="pet">
              </div>
            </div>
            <p>{{ pet.name }}</p>
          </div>
        </a>
      {% empty %}
        <p>No pets yet.</p>
      {% endfor %}
    </div>
  </div>

  <!-- Photos -->
  <div class="pet-photos">
    {% for photo in photos %}
      <a href="{% url 'photo_details' photo.pk %}">
        <img src="{{ photo.image.url }}" alt="photo">
      </a>
    {% empty %}
      <img class="no-posts" src="{% static 'images/no_posts.png' %}" alt="no posts">
    {% endfor %}
  </div>
</div>
{% endblock %}
